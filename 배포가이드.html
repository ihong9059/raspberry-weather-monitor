<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ - ë¼ì¦ˆë² ë¦¬íŒŒì´ ì˜¨ìŠµë„ ëª¨ë‹ˆí„°ë§</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 50px 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        header .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        h2 {
            color: #f5576c;
            font-size: 1.8em;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #f5576c;
        }

        h3 {
            color: #f093fb;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        h4 {
            color: #666;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .danger-box {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .success-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .code-block .comment {
            color: #75715e;
        }

        .code-inline {
            background: #f4f4f4;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .step {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #ff6b6b;
        }

        .step h4 {
            color: #ff6b6b;
            margin-top: 0;
            font-size: 1.3em;
        }

        .step-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        th {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .checklist {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .checklist-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            display: flex;
            align-items: center;
        }

        .checklist-item::before {
            content: "â–¡";
            font-size: 1.5em;
            color: #ffc107;
            margin-right: 15px;
            font-weight: bold;
        }

        .command-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .command-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-top: 4px solid #f5576c;
        }

        .command-card h4 {
            color: #f5576c;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .toc {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .toc h3 {
            color: #f5576c;
            margin-top: 0;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .toc li::before {
            content: "â–¸";
            position: absolute;
            left: 0;
            color: #f093fb;
            font-weight: bold;
        }

        .toc a {
            color: #333;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #f5576c;
        }

        footer {
            background: #2d2d2d;
            color: white;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .command-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ</h1>
            <p class="subtitle">ë¼ì¦ˆë² ë¦¬íŒŒì´ ì˜¨ìŠµë„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ</p>
        </header>

        <div class="content">
            <!-- ëª©ì°¨ -->
            <div class="toc">
                <h3>ğŸ“‘ ëª©ì°¨</h3>
                <ul>
                    <li><a href="#deployment-status">âœ… ë°°í¬ ì™„ë£Œ ìƒíƒœ</a></li>
                    <li><a href="#aws-security">ğŸš¨ AWS Security Group ì„¤ì • (í•„ìˆ˜!)</a></li>
                    <li><a href="#server-management">ğŸ–¥ï¸ ì„œë²„ ê´€ë¦¬ ëª…ë ¹ì–´</a></li>
                    <li><a href="#raspberry-setup">ğŸ“ ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„¤ì •</a></li>
                    <li><a href="#testing">ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•</a></li>
                    <li><a href="#update">ğŸ”„ ì½”ë“œ ì—…ë°ì´íŠ¸ ë°©ë²•</a></li>
                    <li><a href="#troubleshooting">ğŸ› ë¬¸ì œ í•´ê²°</a></li>
                </ul>
            </div>

            <!-- ë°°í¬ ìƒíƒœ -->
            <h2 id="deployment-status">âœ… ë°°í¬ ì™„ë£Œ ìƒíƒœ</h2>

            <div class="success-box">
                <h4>ğŸ‰ EC2 ì„œë²„ ë°°í¬ ì™„ë£Œ!</h4>
                <ul style="font-size: 1.1em; line-height: 2;">
                    <li>âœ“ MariaDB 10.5.29 ì„¤ì¹˜ ë° ì‹¤í–‰ ì¤‘</li>
                    <li>âœ“ Node.js Express API ì„œë²„ ì‹¤í–‰ ì¤‘ (í¬íŠ¸ 4000)</li>
                    <li>âœ“ PM2ë¡œ í”„ë¡œì„¸ìŠ¤ ìë™ ê´€ë¦¬ ì„¤ì •</li>
                    <li>âœ“ ì‹œìŠ¤í…œ ì¬ë¶€íŒ… ì‹œ ìë™ ì‹œì‘ ë“±ë¡</li>
                </ul>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>í•­ëª©</th>
                        <th>ìƒíƒœ</th>
                        <th>ì •ë³´</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ì„œë²„ IP</strong></td>
                        <td>âœ… ì‹¤í–‰ ì¤‘</td>
                        <td>3.35.139.224</td>
                    </tr>
                    <tr>
                        <td><strong>í¬íŠ¸</strong></td>
                        <td>âœ… ë¦¬ìŠ¤ë‹</td>
                        <td>4000</td>
                    </tr>
                    <tr>
                        <td><strong>ì›¹ ëŒ€ì‹œë³´ë“œ</strong></td>
                        <td>âš ï¸ í¬íŠ¸ ì˜¤í”ˆ í•„ìš”</td>
                        <td>http://3.35.139.224:4000/</td>
                    </tr>
                    <tr>
                        <td><strong>PM2 í”„ë¡œì„¸ìŠ¤</strong></td>
                        <td>âœ… Online</td>
                        <td>weather-api</td>
                    </tr>
                    <tr>
                        <td><strong>ë°ì´í„°ë² ì´ìŠ¤</strong></td>
                        <td>âœ… ì—°ê²°ë¨</td>
                        <td>MariaDB (weather_db)</td>
                    </tr>
                </tbody>
            </table>

            <!-- AWS Security Group -->
            <h2 id="aws-security">ğŸš¨ AWS Security Group ì„¤ì • (í•„ìˆ˜!)</h2>

            <div class="danger-box">
                <h3 style="color: #721c24; margin-top: 0;">âš ï¸ ì¤‘ìš”: í¬íŠ¸ 4000ì„ ì—´ì–´ì•¼ í•©ë‹ˆë‹¤!</h3>
                <p style="font-size: 1.1em;">
                    í˜„ì¬ ì„œë²„ëŠ” ì •ìƒ ì‹¤í–‰ ì¤‘ì´ì§€ë§Œ, <strong>ì™¸ë¶€ì—ì„œ ì›¹ ëŒ€ì‹œë³´ë“œì— ì ‘ì†í•˜ë ¤ë©´
                    AWS Security Groupì—ì„œ í¬íŠ¸ 4000ì„ ì—´ì–´ì•¼ í•©ë‹ˆë‹¤.</strong>
                </p>
            </div>

            <h3>AWS Consoleì—ì„œ ì„¤ì •í•˜ê¸°</h3>

            <div class="step">
                <h4><span class="step-number">1</span>AWS EC2 Console ì ‘ì†</h4>
                <p>https://console.aws.amazon.com/ec2/ ì ‘ì†</p>
            </div>

            <div class="step">
                <h4><span class="step-number">2</span>ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ</h4>
                <p>ì¢Œì¸¡ ë©”ë‰´ â†’ <strong>Instances</strong> â†’ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ í´ë¦­</p>
            </div>

            <div class="step">
                <h4><span class="step-number">3</span>Security íƒ­</h4>
                <p>í•˜ë‹¨ íƒ­ì—ì„œ <strong>Security</strong> í´ë¦­</p>
            </div>

            <div class="step">
                <h4><span class="step-number">4</span>Security Groups ë§í¬</h4>
                <p><strong>Security groups</strong> ì„¹ì…˜ì˜ ë§í¬ í´ë¦­</p>
            </div>

            <div class="step">
                <h4><span class="step-number">5</span>Inbound Rules í¸ì§‘</h4>
                <p><strong>Inbound rules</strong> íƒ­ â†’ <strong>Edit inbound rules</strong> í´ë¦­</p>
            </div>

            <div class="step">
                <h4><span class="step-number">6</span>ê·œì¹™ ì¶”ê°€</h4>
                <p><strong>Add rule</strong> ë²„íŠ¼ í´ë¦­ í›„ ë‹¤ìŒ ì…ë ¥:</p>
                <table style="margin-top: 15px; width: 100%;">
                    <tr>
                        <th>Type</th>
                        <td>Custom TCP</td>
                    </tr>
                    <tr>
                        <th>Port range</th>
                        <td>4000</td>
                    </tr>
                    <tr>
                        <th>Source</th>
                        <td>0.0.0.0/0 (ë˜ëŠ” íŠ¹ì • IP)</td>
                    </tr>
                    <tr>
                        <th>Description</th>
                        <td>Weather monitoring API</td>
                    </tr>
                </table>
            </div>

            <div class="step">
                <h4><span class="step-number">7</span>ì €ì¥</h4>
                <p><strong>Save rules</strong> í´ë¦­</p>
            </div>

            <div class="success-box" style="margin-top: 20px;">
                <h4>âœ… ì„¤ì • ì™„ë£Œ í›„</h4>
                <p>ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ <strong>http://3.35.139.224:4000/</strong> ì ‘ì† í…ŒìŠ¤íŠ¸</p>
            </div>

            <!-- ì„œë²„ ê´€ë¦¬ -->
            <h2 id="server-management">ğŸ–¥ï¸ ì„œë²„ ê´€ë¦¬ ëª…ë ¹ì–´</h2>

            <h3>SSH ì ‘ì†</h3>
            <div class="code-block">
ssh -i ~/.ssh/uttec-first-ec2.pem ec2-user@3.35.139.224
            </div>

            <h3>PM2 ëª…ë ¹ì–´</h3>
            <div class="command-grid">
                <div class="command-card">
                    <h4>ğŸ“Š ìƒíƒœ í™•ì¸</h4>
                    <div class="code-block">pm2 status</div>
                    <p>ì‹¤í–‰ ì¤‘ì¸ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ í™•ì¸</p>
                </div>

                <div class="command-card">
                    <h4>ğŸ“„ ë¡œê·¸ ë³´ê¸°</h4>
                    <div class="code-block">pm2 logs weather-api</div>
                    <p>ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°</p>
                </div>

                <div class="command-card">
                    <h4>ğŸ”„ ì¬ì‹œì‘</h4>
                    <div class="code-block">pm2 restart weather-api</div>
                    <p>ì„œë²„ ì¬ì‹œì‘</p>
                </div>

                <div class="command-card">
                    <h4>â¸ï¸ ì¤‘ì§€</h4>
                    <div class="code-block">pm2 stop weather-api</div>
                    <p>ì„œë²„ ì¤‘ì§€</p>
                </div>

                <div class="command-card">
                    <h4>â–¶ï¸ ì‹œì‘</h4>
                    <div class="code-block">pm2 start weather-api</div>
                    <p>ì„œë²„ ì‹œì‘</p>
                </div>

                <div class="command-card">
                    <h4>ğŸ—‘ï¸ ì‚­ì œ</h4>
                    <div class="code-block">pm2 delete weather-api</div>
                    <p>í”„ë¡œì„¸ìŠ¤ ëª©ë¡ì—ì„œ ì œê±°</p>
                </div>
            </div>

            <h3>MySQL ëª…ë ¹ì–´</h3>

            <h4>ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†</h4>
            <div class="code-block">
<span class="comment"># MySQL ì ‘ì†</span>
sudo mysql weather_db
            </div>

            <h4>ë°ì´í„° ì¡°íšŒ</h4>
            <div class="code-block">
<span class="comment">-- ìµœê·¼ 10ê°œ ë°ì´í„°</span>
SELECT * FROM weather_data ORDER BY timestamp DESC LIMIT 10;

<span class="comment">-- ë°ì´í„° ê°œìˆ˜</span>
SELECT COUNT(*) FROM weather_data;

<span class="comment">-- í†µê³„</span>
SELECT
    ROUND(AVG(temperature), 2) as avg_temp,
    ROUND(AVG(humidity), 2) as avg_humidity,
    COUNT(*) as total_records
FROM weather_data;

<span class="comment">-- ì˜¤ëŠ˜ ë°ì´í„°</span>
SELECT * FROM weather_data
WHERE DATE(timestamp) = CURDATE()
ORDER BY timestamp DESC;
            </div>

            <!-- ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„¤ì • -->
            <h2 id="raspberry-setup">ğŸ“ ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„¤ì •</h2>

            <h3>1. ì½”ë“œ ì „ì†¡</h3>
            <div class="warning-box">
                <p><strong>ì£¼ì˜:</strong> ë¼ì¦ˆë² ë¦¬íŒŒì´ IP ì£¼ì†Œë¥¼ í™•ì¸í•˜ì„¸ìš”!</p>
            </div>

            <div class="code-block">
<span class="comment"># ë¡œì»¬ Macì—ì„œ ì‹¤í–‰</span>
cd /Users/maeg/todo/raspberry-weather-monitor
scp -r raspberry/ pi@<ë¼ì¦ˆë² ë¦¬íŒŒì´IP>:/home/pi/weather-monitor/
            </div>

            <h3>2. SSH ì ‘ì†</h3>
            <div class="code-block">
ssh pi@<ë¼ì¦ˆë² ë¦¬íŒŒì´IP>
            </div>

            <h3>3. I2C í™œì„±í™”</h3>
            <div class="step">
                <h4><span class="step-number">1</span>ì„¤ì • ë„êµ¬ ì‹¤í–‰</h4>
                <div class="code-block">sudo raspi-config</div>
            </div>

            <div class="step">
                <h4><span class="step-number">2</span>ë©”ë‰´ ì„ íƒ</h4>
                <p><strong>Interface Options</strong> â†’ <strong>I2C</strong> â†’ <strong>Enable</strong></p>
            </div>

            <div class="step">
                <h4><span class="step-number">3</span>ì¬ë¶€íŒ…</h4>
                <div class="code-block">sudo reboot</div>
            </div>

            <h3>4. ì„¼ì„œ ì—°ê²° í™•ì¸</h3>
            <div class="code-block">
<span class="comment"># I2C ì¥ì¹˜ í™•ì¸ (AHT20ì€ ì£¼ì†Œ 0x38)</span>
sudo i2cdetect -y 1
            </div>

            <div class="info-box">
                <h4>ì˜ˆìƒ ì¶œë ¥:</h4>
                <pre style="margin: 10px 0; font-family: monospace;">
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
30: -- -- -- -- -- -- -- -- <strong style="color: #28a745;">38</strong> -- -- -- -- -- -- --
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
                </pre>
            </div>

            <h3>5. Python í™˜ê²½ ì„¤ì •</h3>
            <div class="code-block">
cd /home/pi/weather-monitor/raspberry

<span class="comment"># ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬</span>
chmod +x install.sh

<span class="comment"># ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</span>
./install.sh
            </div>

            <h3>6. ì„¼ì„œ í…ŒìŠ¤íŠ¸</h3>
            <div class="code-block">
<span class="comment"># ì„¼ì„œ ì½ê¸° í…ŒìŠ¤íŠ¸ (10íšŒ ì¸¡ì •)</span>
python3 sensor_reader.py
            </div>

            <h3>7. ë°ì´í„° ì „ì†¡ í…ŒìŠ¤íŠ¸</h3>
            <div class="code-block">
<span class="comment"># í•œ ë²ˆë§Œ ì „ì†¡</span>
python3 data_sender.py --once
            </div>

            <div class="success-box">
                <h4>âœ… ì„±ê³µ ë©”ì‹œì§€:</h4>
                <pre style="font-family: monospace; margin: 10px 0;">
ğŸ“Š ì¸¡ì •ê°’:
   ğŸŒ¡ï¸  ì˜¨ë„: 23.5Â°C
   ğŸ’§ ìŠµë„: 65.2%

ğŸ“¤ ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡ ì¤‘... (ì‹œë„ 1/3)
âœ… ì „ì†¡ ì„±ê³µ! ë°ì´í„° ID: 1
   ì˜¨ë„: 23.5Â°C, ìŠµë„: 65.2%
                </pre>
            </div>

            <h3>8. Cron ìë™ ì‹¤í–‰ ì„¤ì • (5ë¶„ë§ˆë‹¤)</h3>
            <div class="step">
                <h4><span class="step-number">1</span>Cron í¸ì§‘ê¸° ì—´ê¸°</h4>
                <div class="code-block">crontab -e</div>
            </div>

            <div class="step">
                <h4><span class="step-number">2</span>ë‹¤ìŒ ì¤„ ì¶”ê°€</h4>
                <div class="code-block">
*/5 * * * * cd /home/pi/weather-monitor/raspberry && /usr/bin/python3 data_sender.py --once >> /tmp/weather.log 2>&1
                </div>
                <p style="margin-top: 10px;"><strong>ì˜ë¯¸:</strong> 5ë¶„ë§ˆë‹¤ ìë™ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì§‘ ë° ì „ì†¡</p>
            </div>

            <div class="step">
                <h4><span class="step-number">3</span>Cron ì‘ì—… í™•ì¸</h4>
                <div class="code-block">crontab -l</div>
            </div>

            <div class="step">
                <h4><span class="step-number">4</span>ë¡œê·¸ í™•ì¸</h4>
                <div class="code-block">
<span class="comment"># ì‹¤ì‹œê°„ ë¡œê·¸</span>
tail -f /tmp/weather.log

<span class="comment"># ìµœê·¼ 50ì¤„</span>
tail -50 /tmp/weather.log
                </div>
            </div>

            <!-- í…ŒìŠ¤íŠ¸ -->
            <h2 id="testing">ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•</h2>

            <h3>1. ì„œë²„ ìƒíƒœ í™•ì¸</h3>
            <div class="code-block">
curl http://3.35.139.224:4000/api/health
            </div>

            <div class="success-box">
                <h4>ì˜ˆìƒ ì‘ë‹µ:</h4>
                <pre style="font-family: monospace; margin: 10px 0;">
{
  "success": true,
  "message": "Weather Monitoring API is running",
  "timestamp": "2025-11-14T14:20:00.000Z",
  "version": "1.0.0"
}
                </pre>
            </div>

            <h3>2. í…ŒìŠ¤íŠ¸ ë°ì´í„° ì „ì†¡ (ë¼ì¦ˆë² ë¦¬íŒŒì´ ì—†ì´)</h3>
            <div class="code-block">
curl -X POST http://3.35.139.224:4000/api/weather/data \
  -H "Content-Type: application/json" \
  -H "X-API-Key: raspberry-weather-key-2025-secure" \
  -d '{
    "temperature": 23.5,
    "humidity": 65.2,
    "timestamp": "2025-11-14T12:00:00Z",
    "sensor_id": "test-sensor"
  }'
            </div>

            <h3>3. ë°ì´í„° ì¡°íšŒ</h3>
            <div class="code-block">
<span class="comment"># ìµœì‹  ë°ì´í„°</span>
curl http://3.35.139.224:4000/api/weather/latest

<span class="comment"># ê¸°ê°„ë³„ ë°ì´í„° (ìµœê·¼ 24ì‹œê°„)</span>
curl "http://3.35.139.224:4000/api/weather/data?start=2025-11-13T00:00:00Z&end=2025-11-14T00:00:00Z"

<span class="comment"># í†µê³„</span>
curl http://3.35.139.224:4000/api/weather/stats
            </div>

            <h3>4. ì›¹ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸</h3>
            <div class="info-box">
                <p style="font-size: 1.1em;">
                    í¬íŠ¸ 4000 ì˜¤í”ˆ í›„ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†:<br>
                    <strong style="color: #17a2b8; font-size: 1.3em;">
                        http://3.35.139.224:4000/
                    </strong>
                </p>
            </div>

            <!-- ì—…ë°ì´íŠ¸ -->
            <h2 id="update">ğŸ”„ ì½”ë“œ ì—…ë°ì´íŠ¸ ë°©ë²•</h2>

            <h3>ë¡œì»¬ì—ì„œ ìˆ˜ì • í›„ EC2ì— ë°°í¬</h3>

            <div class="step">
                <h4><span class="step-number">1</span>ë¡œì»¬ì—ì„œ ì••ì¶•</h4>
                <div class="code-block">
cd /Users/maeg/todo/raspberry-weather-monitor
tar -czf weather-server.tar.gz server public
                </div>
            </div>

            <div class="step">
                <h4><span class="step-number">2</span>EC2ë¡œ ì—…ë¡œë“œ</h4>
                <div class="code-block">
scp -i ~/.ssh/uttec-first-ec2.pem weather-server.tar.gz ec2-user@3.35.139.224:/home/ec2-user/
                </div>
            </div>

            <div class="step">
                <h4><span class="step-number">3</span>EC2ì—ì„œ ì••ì¶• í•´ì œ ë° ì¬ì‹œì‘</h4>
                <div class="code-block">
ssh -i ~/.ssh/uttec-first-ec2.pem ec2-user@3.35.139.224

cd /home/ec2-user
tar -xzf weather-server.tar.gz -C weather-server --strip-components=0

cd weather-server/server
npm install

pm2 restart weather-api
pm2 logs weather-api
                </div>
            </div>

            <!-- ë¬¸ì œ í•´ê²° -->
            <h2 id="troubleshooting">ğŸ› ë¬¸ì œ í•´ê²°</h2>

            <h3>âŒ "Connection refused" ì˜¤ë¥˜</h3>
            <div class="danger-box">
                <h4>ì›ì¸</h4>
                <p>AWS Security Groupì—ì„œ í¬íŠ¸ 4000ì´ ì—´ë ¤ìˆì§€ ì•ŠìŒ</p>
                <h4>í•´ê²°</h4>
                <p>ìœ„ì˜ <strong>"AWS Security Group ì„¤ì •"</strong> ì„¹ì…˜ ì°¸ì¡°</p>
            </div>

            <h3>âŒ ì„œë²„ê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ</h3>
            <div class="warning-box">
                <h4>í™•ì¸ ë°©ë²•</h4>
                <div class="code-block">
<span class="comment"># PM2 ë¡œê·¸ í™•ì¸</span>
pm2 logs weather-api --lines 100

<span class="comment"># ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸</span>
pm2 status

<span class="comment"># MySQL ì—°ê²° í…ŒìŠ¤íŠ¸</span>
sudo mysql -u weather_user -p weather_db
<span class="comment"># ë¹„ë°€ë²ˆí˜¸: WeatherPass2025!</span>
                </div>
            </div>

            <h3>âŒ ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ ì „ì†¡ ì‹¤íŒ¨</h3>
            <div class="warning-box">
                <h4>ì²´í¬ë¦¬ìŠ¤íŠ¸</h4>
                <div class="checklist">
                    <div class="checklist-item">config.jsonì˜ API URL í™•ì¸</div>
                    <div class="checklist-item">API Key ì¼ì¹˜ í™•ì¸ (ì„œë²„ .env vs ë¼ì¦ˆë² ë¦¬íŒŒì´ config.json)</div>
                    <div class="checklist-item">ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸ (ping 3.35.139.224)</div>
                    <div class="checklist-item">í¬íŠ¸ 4000ì´ ì—´ë ¤ìˆëŠ”ì§€ í™•ì¸</div>
                </div>
            </div>

            <h3>âŒ "No module named 'adafruit_aht20'"</h3>
            <div class="warning-box">
                <h4>í•´ê²°</h4>
                <div class="code-block">
<span class="comment"># ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ</span>
pip3 install adafruit-circuitpython-aht20

<span class="comment"># ë˜ëŠ” ì „ì²´ ì¬ì„¤ì¹˜</span>
cd /home/pi/weather-monitor/raspberry
./install.sh
                </div>
            </div>

            <h3>âŒ I2C ì¥ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ</h3>
            <div class="warning-box">
                <h4>í™•ì¸ì‚¬í•­</h4>
                <ol style="margin-left: 20px; line-height: 2;">
                    <li>I2Cê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ (<code class="code-inline">sudo raspi-config</code>)</li>
                    <li>ì„¼ì„œ ì—°ê²° ìƒíƒœ í™•ì¸ (VCC, GND, SDA, SCL)</li>
                    <li>ì„¼ì„œ ì£¼ì†Œ í™•ì¸ (<code class="code-inline">sudo i2cdetect -y 1</code>)</li>
                    <li>ì¬ë¶€íŒ… (<code class="code-inline">sudo reboot</code>)</li>
                </ol>
            </div>

            <!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
            <h2>ğŸ“‹ ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>

            <h3>EC2 ì„œë²„</h3>
            <div class="checklist">
                <div class="checklist-item">MySQL ì„¤ì¹˜ ë° DB ìƒì„±</div>
                <div class="checklist-item">Node.js ì„œë²„ ì½”ë“œ ë°°í¬</div>
                <div class="checklist-item">npm íŒ¨í‚¤ì§€ ì„¤ì¹˜</div>
                <div class="checklist-item">PM2ë¡œ ì„œë²„ ì‹œì‘</div>
                <div class="checklist-item">PM2 ìë™ ì‹œì‘ ì„¤ì •</div>
                <div class="checklist-item">AWS Security Group í¬íŠ¸ 4000 ì˜¤í”ˆ âš ï¸</div>
                <div class="checklist-item">ì›¹ ë¸Œë¼ìš°ì € ì ‘ì† í…ŒìŠ¤íŠ¸</div>
            </div>

            <h3>ë¼ì¦ˆë² ë¦¬íŒŒì´</h3>
            <div class="checklist">
                <div class="checklist-item">I2C í™œì„±í™”</div>
                <div class="checklist-item">AHT20 ì„¼ì„œ ì—°ê²°</div>
                <div class="checklist-item">Python íŒ¨í‚¤ì§€ ì„¤ì¹˜</div>
                <div class="checklist-item">ì„¼ì„œ ì½ê¸° í…ŒìŠ¤íŠ¸</div>
                <div class="checklist-item">ë°ì´í„° ì „ì†¡ í…ŒìŠ¤íŠ¸</div>
                <div class="checklist-item">Cron ìë™ ì‹¤í–‰ ì„¤ì •</div>
                <div class="checklist-item">24ì‹œê°„ ëª¨ë‹ˆí„°ë§ í™•ì¸</div>
            </div>

            <!-- íŒŒì¼ ìœ„ì¹˜ -->
            <h2>ğŸ“‚ ì¤‘ìš” íŒŒì¼ ìœ„ì¹˜</h2>

            <table>
                <thead>
                    <tr>
                        <th>ìœ„ì¹˜</th>
                        <th>ê²½ë¡œ</th>
                        <th>ì„¤ëª…</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ë¡œì»¬</strong></td>
                        <td>/Users/maeg/todo/raspberry-weather-monitor/</td>
                        <td>ê°œë°œ ì†ŒìŠ¤ ì½”ë“œ</td>
                    </tr>
                    <tr>
                        <td><strong>EC2 ì„œë²„</strong></td>
                        <td>/home/ec2-user/weather-server/</td>
                        <td>ìš´ì˜ ì„œë²„ ì½”ë“œ</td>
                    </tr>
                    <tr>
                        <td><strong>EC2 í™˜ê²½ë³€ìˆ˜</strong></td>
                        <td>/home/ec2-user/weather-server/server/.env</td>
                        <td>API Key, DB ë¹„ë°€ë²ˆí˜¸</td>
                    </tr>
                    <tr>
                        <td><strong>ë¼ì¦ˆë² ë¦¬íŒŒì´</strong></td>
                        <td>/home/pi/weather-monitor/raspberry/</td>
                        <td>ì„¼ì„œ ì½”ë“œ</td>
                    </tr>
                    <tr>
                        <td><strong>ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„¤ì •</strong></td>
                        <td>/home/pi/weather-monitor/raspberry/config.json</td>
                        <td>API URL, API Key</td>
                    </tr>
                </tbody>
            </table>

            <!-- ì—°ë½ì²˜ -->
            <div class="info-box">
                <h3 style="margin-top: 0;">ğŸ’¡ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</h3>
                <p>ì¶”ê°€ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><strong>í”„ë¡œì íŠ¸ì™„ë£Œë³´ê³ ì„œ.html</strong> - ì „ì²´ í”„ë¡œì íŠ¸ ê°œìš”</li>
                    <li><strong>PROJECT-STATUS.md</strong> - í”„ë¡œì íŠ¸ ìƒíƒœ</li>
                    <li><strong>raspberry/README.md</strong> - ë¼ì¦ˆë² ë¦¬íŒŒì´ ìƒì„¸ ê°€ì´ë“œ</li>
                </ul>
            </div>
        </div>

        <footer>
            <p><strong>ğŸš€ ë¼ì¦ˆë² ë¦¬íŒŒì´ ì˜¨ìŠµë„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ - ë°°í¬ ê°€ì´ë“œ</strong></p>
            <p>Â© 2025 Weather Monitoring Project</p>
        </footer>
    </div>
</body>
</html>
